<html>
<head>
	<meta charset="utf-8">
	<title>calculadora básica</title>
  <link rel="stylesheet" type="text/css" href="estilo.css">

	<script type="text/javascript">

  function concatenar(ope){     
     document.getElementById("result").value = document.getElementById("result").value + ope;

  }
  function igual(){    
    document.getElementById("result").value = eval(document.getElementById("result").value);
 }

  function graficar(escala){
        if(escala==0) escala =1;
        document.getElementById("lblrango").innerHTML = escala;

        var c = document.getElementById("myCanvas");
        var ctx = c.getContext("2d");                  
                          
        c.width = c.width; //limpiar canvas         

        ctx.fillStyle = "#FF0000";           
        ctx.moveTo(0,100);
        ctx.lineTo(400,100);
        ctx.stroke();
       
        ctx.moveTo(200,0);
        ctx.lineTo(200,200);
        ctx.stroke();

        ctx.translate(200,100);
        ctx.fillStyle = "#FF0000"; 

        var cadena =  'Math.sin(X)';//document.getElementById("result").value;//'Math.sin(X)'
        var res; 
        var y1=0, y2=0, x1=0, x2=0;

        ctx.font = "bold 12px sans-serif";
        //dibujar lineas horizontales (unidades)
        var cont = -5;
        for(var i=-200; i<200; i+=40)
        {
          ctx.moveTo(i,0); //inicial
          ctx.lineTo(i,7); //final
          ctx.fillText(cont*escala,i-5,20);
          ctx.stroke();
          cont=cont+1;

        }

        //dibujar lineas verticales hacia arriba(unidades)
        var cy=0;
        for(var y=0; y>-100; y-=40)
        {
          ctx.moveTo(0,y); //inicial
          ctx.lineTo(7,y); //final
          ctx.fillText(cy*escala,10,y);
          ctx.stroke();
          cy=cy+1;
        }  

        //dibujar lineas verticales hacia abajo (unidades)
        var cy2=0;
        for(var y=0; y<100; y+=40)
        {
          ctx.moveTo(0,y); //inicial
          ctx.lineTo(7,y); //final
          ctx.fillText(cy2*escala,10,y);
          ctx.stroke();
          cy2=cy2+1;
        }    

        //dibujar funcion:
        for(var i=-200; i<200; i+=0.25){                    
            res = cadena.replace("X",i);                             
            y1 = eval(res); 

            x1=i;

            x2 = i+0.25;          
            res = cadena.replace("X",x2);         
            y2 = eval(res);  
            
            var d = Math.sqrt(Math.pow(x2-x1,2) + Math.pow(y2-y1,2));                        
            if(d<10){            
             ctx.moveTo(x1*(40/escala), -y1*(40/escala)); //inicial
             ctx.lineTo(x2*(40/escala), -y2*(40/escala)); //final
             ctx.stroke();                        
            }                                                
        } 
        
        ctx.translate(-200,-100);
        
       }

       function reiniciar(){        
        document.getElementById("result").value ="";
        }
	</script>  
</head>
<body>    

<table>   
     <caption><h1>CALCULADORA</h1></caption>  
     <tr align="center" valign="middle">
      <td colspan="10">
        <input type="text" id="result" disabled>         
        </td>
     </tr>
    <tr>      
      <td align="center" onclick="concatenar(1)"><p>1</p></td> 
      <td align="center" onclick="concatenar(2)"><p>2</p></td> 
      <td align="center" onclick="concatenar(3)"><p>3</p></td> 
      <td align="center" onclick="concatenar(4)"><p>4</p></td> 
      <td align="center" onclick="concatenar(5)"><p>5</p></td> 
      <td align="center" onclick="concatenar(6)"><p>6</p></td> 
      <td align="center" onclick="concatenar(7)"><p>7</p></td> 
      <td align="center" onclick="concatenar(8)"><p>8</p></td> 
      <td align="center" onclick="concatenar(9)"><p>9</p></td> 
      <td align="center" onclick="concatenar(0)"><p>0</p></td> 
    </tr>
    <tr>
      <td align="center" onclick="concatenar('+')"><p>+</p></td> 
      <td align="center" onclick="concatenar('-')"><p>-</p></td> 
      <td align="center" onclick="concatenar('*')"><p>*</p></td> 
      <td align="center" onclick="concatenar('/')"><p>/</p></td> 
      <td align="center" onclick="concatenar('√')"><img src="raiz.png"/></td> 
      <td align="center" onclick="concatenar('Math.pow()')"><img src="xcuad.png"/></td> 
      <td align="center" onclick="concatenar('X')"><img src="x.png"/></td> 
    <tr> 
      <td align="center" onclick="concatenar('S')"><p>senx</p></td> 
      <td align="center" onclick="concatenar('C')"><p>cosx</p></td> 
      <td align="center" onclick="concatenar('T')"><p>tanx</p></td> 
      <td align="center" colspan="3" onclick="igual()"><p>=</p></td> 
      <td colspan="2" align="center" onclick="reiniciar()" title="limpiar la memoria"><p>C</p></td>
      <td colspan="2" align="center" onclick="graficar(1)"><p>graficar</p></td>      
    </tr>      
  </table>

<div style="margin:20px;"> 
  escala: <input type="range" min="0" max="10" step="2" name="rango" value ="0" onchange="graficar(this.value)"/>
  <label id="lblrango">

</div>
<br>
   <canvas id="myCanvas" width="400" height="200" style="border:1px solid #c3c3c3; margin: 20px;">
       Your browser does not support the HTML5 canvas tag.
    </canvas>
  
     
</body>
</html>